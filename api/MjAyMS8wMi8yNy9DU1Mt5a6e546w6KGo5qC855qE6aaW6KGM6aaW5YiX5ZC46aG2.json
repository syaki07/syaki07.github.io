{"title":"CSS 实现表格的首行首列吸顶","date":"2021-02-27T14:54:34.000Z","date_formatted":{"ll":"Feb 27, 2021","L":"02/27/2021","MM-DD":"02-27"},"link":"2021/02/27/CSS-实现表格的首行首列吸顶","tags":["CSS"],"updated":"2021-02-27T15:33:12.340Z","content":"<h1 id=\"背景\">背景<a title=\"#背景\" href=\"#背景\"></a></h1>\n<p>最近在对现有的页面进行优化。</p>\n<p>发现之前页面中表格的首行首列吸顶效果是由 js 在 onscroll 中计算 top 和 left 的数值实现的。</p>\n<h1 id=\"css-的实现方法\">CSS 的实现方法<a title=\"#css-的实现方法\" href=\"#css-的实现方法\"></a></h1>\n<p>通过谷歌发现一个通过 <code>position: sticky</code> 和 <code>table-layout: fixed</code> 配合 <code>table</code> 的实现方法非常巧妙。</p>\n<p>这里利用 <code>position: sticky</code> 和 <code>width: max-content</code> 配合 <code>div</code> 实现吸顶的效果。</p>\n<p>效果如下：</p>\n<style>\n    .main {\n        width: 500px;\n        height: 280px;\n        overflow-x: scroll;\n        overflow-y: scroll;\n    }\n    .head,\n    .row {\n        width: max-content;\n    }\n    .head {\n        position: sticky;\n        top: 0;\n        z-index: 2;\n    }\n    .col {\n        display: inline-block;\n        border: 1px solid #5f5f5f;\n        width: 100px;\n        height: 40px;\n    }\n    .head .col {\n        background-color: cornflowerblue;\n    }\n    .head .col:first-child {\n        position: sticky;\n        left: 0;\n        background-color: aquamarine;\n        z-index: 1;\n    }\n    .row .col:first-child {\n        position: sticky;\n        left: 0;\n        z-index: 1;\n        background-color: palegoldenrod;\n    }\n</style>\n<div class=\"main\">\n    <div class=\"head\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n        <div class=\"col\"></div>\n    </div>\n</div>\n<p>附上 demo 代码：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.main</span> &#123;</span></span><br><span class=\"line\">        width: 500px;</span><br><span class=\"line\">        height: 280px;</span><br><span class=\"line\">        overflow-x: scroll;</span><br><span class=\"line\">        overflow-y: scroll;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.head</span>,</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.row</span> &#123;</span></span><br><span class=\"line\">        width: max-content;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.head</span> &#123;</span></span><br><span class=\"line\">        position: sticky;</span><br><span class=\"line\">        top: 0;</span><br><span class=\"line\">        z-index: 2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.col</span> &#123;</span></span><br><span class=\"line\">        display: inline-block;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">border</span>: 1<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#5f5f5f</span>;</span></span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        height: 40px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.head</span> <span class=\"selector-class\">.col</span> &#123;</span></span><br><span class=\"line\">        background-color: cornflowerblue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.head</span> <span class=\"selector-class\">.col</span><span class=\"selector-pseudo\">:first-child</span> &#123;</span></span><br><span class=\"line\">        position: sticky;</span><br><span class=\"line\">        left: 0;</span><br><span class=\"line\">        background-color: aquamarine;</span><br><span class=\"line\">        z-index: 1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.row</span> <span class=\"selector-class\">.col</span><span class=\"selector-pseudo\">:first-child</span> &#123;</span></span><br><span class=\"line\">        position: sticky;</span><br><span class=\"line\">        left: 0;</span><br><span class=\"line\">        z-index: 1;</span><br><span class=\"line\">        background-color: palegoldenrod;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;main&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;head&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;n in 10&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;n&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>","next":{"title":"GitLab CI/CD 实践","link":"2020/10/21/GitLab-CI-CD-实践"},"plink":"https://syaki.github.io/2021/02/27/CSS-实现表格的首行首列吸顶/","toc":[{"id":"背景","title":"背景","index":"1"},{"id":"css-的实现方法","title":"CSS 的实现方法","index":"2"}],"copyright":{"author":"Syaki","link":"<a href=\"https://syaki.github.io/2021/02/27/CSS-实现表格的首行首列吸顶/\" title=\"CSS 实现表格的首行首列吸顶\">https://syaki.github.io/2021/02/27/CSS-实现表格的首行首列吸顶/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)"}}