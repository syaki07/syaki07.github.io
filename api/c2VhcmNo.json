[{"title":"CSS å®ç°è¡¨æ ¼çš„é¦–è¡Œé¦–åˆ—å¸é¡¶","date":"2021-02-27T14:54:34.000Z","date_formatted":{"ll":"Feb 27, 2021","L":"02/27/2021","MM-DD":"02-27"},"updated":"2021-02-27T15:33:12.340Z","content":"èƒŒæ™¯\næœ€è¿‘åœ¨å¯¹ç°æœ‰çš„é¡µé¢è¿›è¡Œä¼˜åŒ–ã€‚\nå‘ç°ä¹‹å‰é¡µé¢ä¸­è¡¨æ ¼çš„é¦–è¡Œé¦–åˆ—å¸é¡¶æ•ˆæœæ˜¯ç”± js åœ¨ onscroll ä¸­è®¡ç®— top å’Œ left çš„æ•°å€¼å®ç°çš„ã€‚\nCSS çš„å®ç°æ–¹æ³•\né€šè¿‡è°·æ­Œå‘ç°ä¸€ä¸ªé€šè¿‡ position: sticky å’Œ table-layout: fixed é…åˆ table çš„å®ç°æ–¹æ³•éå¸¸å·§å¦™ã€‚\nè¿™é‡Œåˆ©ç”¨ position: sticky å’Œ width: max-content é…åˆ div å®ç°å¸é¡¶çš„æ•ˆæœã€‚\næ•ˆæœå¦‚ä¸‹ï¼š\n\n    .main {\n        width: 500px;\n        height: 280px;\n        overflow-x: scroll;\n        overflow-y: scroll;\n    }\n    .head,\n    .row {\n        width: max-content;\n    }\n    .head {\n        position: sticky;\n        top: 0;\n        z-index: 2;\n    }\n    .col {\n        display: inline-block;\n        border: 1px solid #5f5f5f;\n        width: 100px;\n        height: 40px;\n    }\n    .head .col {\n        background-color: cornflowerblue;\n    }\n    .head .col:first-child {\n        position: sticky;\n        left: 0;\n        background-color: aquamarine;\n        z-index: 1;\n    }\n    .row .col:first-child {\n        position: sticky;\n        left: 0;\n        z-index: 1;\n        background-color: palegoldenrod;\n    }\n\n\n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n\né™„ä¸Š demo ä»£ç ï¼š\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&lt;style&gt;    .main &#123;        width: 500px;        height: 280px;        overflow-x: scroll;        overflow-y: scroll;    &#125;    .head,    .row &#123;        width: max-content;    &#125;    .head &#123;        position: sticky;        top: 0;        z-index: 2;    &#125;    .col &#123;        display: inline-block;        border: 1px solid #5f5f5f;        width: 100px;        height: 40px;    &#125;    .head .col &#123;        background-color: cornflowerblue;    &#125;    .head .col:first-child &#123;        position: sticky;        left: 0;        background-color: aquamarine;        z-index: 1;    &#125;    .row .col:first-child &#123;        position: sticky;        left: 0;        z-index: 1;        background-color: palegoldenrod;    &#125;&lt;/style&gt;&lt;div class=&quot;main&quot;&gt;    &lt;div class=&quot;head&quot;&gt;        &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;    &lt;/div&gt;    &lt;template v-for=&quot;n in 10&quot;&gt;        &lt;div class=&quot;row&quot; :key=&quot;n&quot;&gt;            &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;            &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;            &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;            &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;            &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;            &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;            &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;            &lt;div class=&quot;col&quot;&gt;&lt;/div&gt;        &lt;/div&gt;    &lt;/template&gt;&lt;/div&gt;","plink":"https://syaki.github.io/2021/02/27/CSS-å®ç°è¡¨æ ¼çš„é¦–è¡Œé¦–åˆ—å¸é¡¶/"},{"title":"GitLab CD/CD å®è·µ","date":"2020-10-21T15:06:51.000Z","date_formatted":{"ll":"Oct 21, 2020","L":"10/21/2020","MM-DD":"10-21"},"updated":"2021-03-02T05:41:38.651Z","content":"\nJavaScript Web åº”ç”¨çš„ GitLab CI/CD é…ç½®\nPipeline\nStart -&gt; Install -&gt; Build -&gt; Publish -&gt; Verify -&gt; End\nInstall\né€šè¿‡ npm install å®‰è£…ä¾èµ–åŒ…ï¼Œå¹¶å°†ç»“æœç¼“å­˜åˆ° cache é‡Œã€‚\n123456script:    - npm install --proxy=$PROXY --https-proxy=$PROXYcache:    key: $CI_COMMIT_REF_SLUG-$CI_COMMIT_SHORT_SHA    paths:        - node_modules\nå¦‚æœé¡¹ç›®ä¾èµ–ç§æœ‰ git ä»“åº“å’Œä»£ç†ã€‚\nSSH_PRIVATE_KEY å’Œ SSH_KNOWN_HOSTS ä¸ºé…ç½®å¥½çš„ GitLab CI/CD å˜é‡ã€‚\n123456789101112variables:    PROXY: # proxy link    HTTP_PROXY: $PROXY    HTTPS_PROXY: $PROXYbefore_script:    # é¡¹ç›®ä¾èµ– git ç§æœ‰ä»“åº“ä»£ç ï¼Œå› æ­¤å°†é…ç½®å¥½çš„ç§é’¥å­˜å‚¨åˆ°å½“å‰å®¹å™¨ä¸­    - eval $(ssh-agent -s)    - echo &quot;$SSH_PRIVATE_KEY&quot; | tr -d &#x27;\\r&#x27; | ssh-add - &gt; /dev/null    - mkdir -p ~/.ssh    - chmod 700 ~/.ssh    - echo &quot;$SSH_KNOWN_HOSTS&quot; &gt; ~/.ssh/known_hosts    - chmod 644 ~/.ssh.SSH_KNOWN_HOSTS\nBuild\nä»ç¼“å­˜ä¸­æ‹‰å– Install çš„ç»“æœï¼Œè¿è¡Œè‡ªå®šä¹‰æ„å»ºå‘½ä»¤å¹¶å°†ç”Ÿæˆçš„ç»“æœå­˜å…¥ artifacts ã€‚\n123456789101112131415variables:    &lt;&lt;: *node-variables    &lt;&lt;: *organization-variablescache:    key: $CI_COMMIT_REF_SLUG-$CI_COMMIT_SHORT_SHA    paths:        - node_modules    # æ‹‰å– Install é˜¶æ®µç”Ÿæˆçš„ node_modules    policy: pullartifacts:    # å°†è‡ªå®šä¹‰æ„å»ºåçš„èµ„æºå­˜å‚¨åˆ° artifacts ä¸­    paths:        - dist/ # è‡ªå®šä¹‰æ„å»ºåçš„èµ„æºè·¯å¾„script:    - npm run build # è‡ªå®šä¹‰æ„å»ºå‘½ä»¤\nPublish\nä½¿ç”¨æ„å»ºå¥½çš„é•œåƒï¼Œå‘å¸ƒé™æ€èµ„æºã€‚\n12image: # å‘å¸ƒé™æ€èµ„æºçš„é•œåƒåœ°å€script: publish # å‘å¸ƒå‘½ä»¤\nVerify\nä¸€äº›è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä»£ç é™æ€åˆ†æå’Œä»£ç æ ¼å¼åŒ–ã€‚\nJava Web åº”ç”¨çš„ GitLab CI/CD é…ç½®\nPipeline\nStart -&gt; Complie -&gt; Package -&gt; Image -&gt; Deploy -&gt; End\nComplie\nåˆ©ç”¨ maven å¯¹ä»£ç è¿›è¡Œ clean compile ï¼Œå°† verify-package.yml æŠ¥å‘Šå­˜å…¥ artifacts ï¼Œå¹¶å°†ç”Ÿæˆçš„ target å­˜å…¥ cache ã€‚\n12345678910caches:    - key: compile-cache      paths:          - $POM_DIR/**/target/classes          - $POM_DIR/**/target/generated-sources          - $POM_DIR/**/target/maven-status      policy: pushartifacts:    reports:        snapshot: &#x27;$POM_DIR/**/target/verify-package.yml&#x27;\nPackage\nPackage ä¾èµ– Compile ã€‚\nä» cache ä¸­æ‹‰å– compile cache ã€‚å¹¶å°†æ‰“åŒ…ç»“æœå­˜å…¥ cache ã€‚\n12345678910111213141516needs:    - Compilecaches:    - key: compile-cache      paths:          - $POM_DIR/**/target/classes          - $POM_DIR/**/target/generated-sources          - $POM_DIR/**/target/maven-status      policy: pull    - key: $&#123;CACHE_KEY&#125;-target      paths:          - ./**/*.war          - ./**/*.zip      policy: pushscript:    - mvn package\nImage\nåˆ©ç”¨ package çš„ cache å’Œæ„å»ºå¥½çš„åŸºç¡€ç¯å¢ƒé•œåƒæ„å»ºåº”ç”¨é•œåƒæ”¾å…¥ cache ä¸­ã€‚\n123456789101112caches:    - key: $&#123;CACHE_KEY&#125;-target      paths:          - ./**/*.war      policy: pull    - key: $&#123;CACHE_KEY&#125;-image-repo-file      paths:        - $&#123;IMAGE_REPO_FILE&#125;     policy: pushscript:    - docker login    - image build\nDeploy\næ‹‰å– cache ä¸­æ„å»ºå¥½çš„åº”ç”¨é•œåƒï¼Œå‘å¸ƒåˆ°æœºå™¨ä¸Šã€‚\n","plink":"https://syaki.github.io/2020/10/21/GitLab-CD-CD-å®è·µ/"},{"title":"Practical application of Cartesian product","date":"2020-08-17T06:31:06.000Z","date_formatted":{"ll":"Aug 17, 2020","L":"08/17/2020","MM-DD":"08-17"},"updated":"2021-02-19T13:58:52.295Z","content":"JavaScript ä½¿ç”¨ Array.flagMap() æ–¹æ³•å®ç°ç¬›å¡å°”ä¹˜ç§¯\n12345const a = [&#x27;a1&#x27;, &#x27;a2&#x27;, &#x27;a3&#x27;];const b = [&#x27;b1&#x27;, &#x27;b2&#x27;, &#x27;b3&#x27;];console.log(a.flatMap((x1) =&gt; b.map((x2) =&gt; x1 + x2)));// Array(9) [ &quot;a1b1&quot;, &quot;a1b2&quot;, &quot;a1b3&quot;, &quot;a2b1&quot;, &quot;a2b2&quot;, &quot;a2b3&quot;, &quot;a3b1&quot;, &quot;a3b2&quot;, &quot;a3b3&quot; ]\nJava åˆ©ç”¨ç¬›å¡å°”ä¹˜ç§¯å®ç°ä¸­æ–‡å§“åæ‹¼éŸ³æ ¡éªŒ\nç”±äºä¸­æ–‡å­˜åœ¨å¤šéŸ³å­—çš„æƒ…å†µï¼Œå¯¹äºæ¯ä¸ªå­—å¯èƒ½çš„æ‹¼éŸ³æ±‚ç¬›å¡å°”ç§¯ã€‚\næ¥å£å®šä¹‰\n123public interface IChineseNamePinyin &#123;    boolean verifyChineseNamePinyin(String name, String pinyin);&#125;\nå…·ä½“å®ç°\nåˆ©ç”¨ Java 8 Stream flatMap() æ–¹æ³•å¯¹å§“åä¸­æ¯ä¸ªå­—å¯èƒ½çš„æ‹¼éŸ³æ±‚ç¬›å¡å°”ç§¯ã€‚\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455public ChineseNamePinyinImpl implements IChineseNamePinyin &#123;    /**     * ä¸­æ–‡å§“åæ‹¼éŸ³æ ¡éªŒ     * @param name   å§“å     * @param pinyin æ‹¼éŸ³     * @return ä¸­æ–‡å§“åæ‹¼éŸ³æ ¡éªŒç»“æœ     */    @Override    public boolean verifyChineseNamePinyin(String name, String pinyin) &#123;        if (StringUtils.isNullOrEmpty(name) || StringUtils.isNullOrEmpty(pinyin)) return false;        // åˆå§‹åŒ– pinyin4j format        HanyuPinyinOutputFormat format = new HanyuPinyinOutputFormat();        format.setCaseType(HanyuPinyinCaseType.LOWERCASE);        format.setToneType(HanyuPinyinToneType.WITHOUT_TONE);        format.setVCharType(HanyuPinyinVCharType.WITH_V);        // å°†å§“åè½¬ä¸º char array        char[] nameChars = name.trim().toCharArray();        List&lt;List&lt;String&gt;&gt; nameCharPinyinList = Lists.newLinkedList();        List&lt;String&gt; namePinyinList = Lists.newLinkedList();        namePinyinList.add(&quot;&quot;);        try &#123;            for (char nameChar : nameChars) &#123;                // è¿‡æ»¤éä¸­æ–‡å­—ç¬¦                if (!Character.toString(nameChar).matches(&quot;[\\\\u4E00-\\\\u9FA5]+&quot;)) continue;                // ç»Ÿè®¡å¤šéŸ³å­—æ‰€æœ‰çš„æ‹¼éŸ³                nameCharPinyinList.add(this.nameCharToHanyuPinyinStringList(nameChar, format));            &#125;        &#125; catch (Exception e) &#123;            return false;        &#125;        // å°†æ‰€æœ‰æ‹¼éŸ³çš„ç»„åˆæ”¶é›†æˆä¸€ä¸ª list        for (List&lt;String&gt; strings : nameCharPinyinList) &#123;            namePinyinList = namePinyinList.stream()                    .flatMap(r -&gt; strings.stream()                            .map(c -&gt; r + c))                    .collect(Collectors.toList());        &#125;        // åˆ¤æ–­æ‹¼éŸ³æ˜¯å¦åŒ¹é…        return namePinyinList.contains(pinyin);    &#125;    /**     * è°ƒç”¨ PinyinHelper è·å–æ‹¼éŸ³     */    private List&lt;String&gt; nameCharToHanyuPinyinStringList(char nameChar, HanyuPinyinOutputFormat format) throws Exception &#123;        return Arrays.asList(PinyinHelper.toHanyuPinyinStringArray(nameChar, format));    &#125;&#125;","plink":"https://syaki.github.io/2020/08/17/Practical-application-of-Cartesian-product/"},{"title":"Remote debug with Java Instrumentation","date":"2020-05-19T05:13:32.000Z","date_formatted":{"ll":"May 19, 2020","L":"05/19/2020","MM-DD":"05-19"},"updated":"2021-03-01T13:33:12.202Z","content":"æœ€è¿‘åœ¨çº¿ä¸Šé—®é¢˜æ’éšœæ—¶ï¼Œå‘ç°äº†å†…éƒ¨æ¡†æ¶å®ç°çš„ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œå¯ä»¥å¯¹ç”Ÿäº§æœºå™¨ä¸Šçš„ä»£ç å®ç°å¯¹è¿è¡Œç±»çš„åŠ¨æ€åŸ‹ç‚¹ï¼ˆç±»ä¼¼äºæ–­ç‚¹ï¼Œä½†å¹¶ä¸ä¼šé˜»å¡åº”ç”¨è¿è¡Œï¼‰ï¼Œå¹¶è·å–æ–­ç‚¹å¤„çš„æ ˆå¸§ã€‚\nç¿»çœ‹æºç å­¦ä¹ äº†ä¸‹å®ç°æ€è·¯ã€‚\nåŸºæœ¬åŸç†\nåˆ©ç”¨ Java Agent æŠ€æœ¯ï¼Œé€šè¿‡ Java Instrumentation æ¥å£ç¼–å†™ Agent ã€‚JVM å¯åŠ¨æ—¶åŠ è½½ Agent ã€‚\nåŠ è½½ Agent\n\n\nå®ç° Agent å¯åŠ¨æ–¹æ³• premain æˆ– agentmain\n\n\nAgent æ‰“æˆä¸€ä¸ª jar åŒ…ï¼Œå¹¶åœ¨ MANIFEST.MF ä¸­æŒ‡å®š\n\n\nJVM å¯åŠ¨å‚æ•°æ·»åŠ  &quot;-javaagent:xxx.jar&quot; åŠ è½½ Agent\n\n\næ–­ç‚¹æ³¨å†Œ\nå®ç°ä¸€ä¸ª http æ¥å£ï¼Œæ¥å—æ–­ç‚¹ç›¸å…³çš„ä¿¡æ¯ã€‚\nè°ƒç”¨ Instrumentation.retransformClasses å°†æ–­ç‚¹æ‰€åœ¨çš„ç±»é‡æ–°åŠ è½½ã€‚\nå®ç° ClassFileTransformer çš„ transform æ–¹æ³•ï¼Œåœ¨æ–­ç‚¹å¤„æ·»åŠ è®°å½•æ ˆå¸§çš„ä»£ç ã€‚\né€šè¿‡ Instrumentation.addTransformer æ·»åŠ åˆ°å®ç°çš„ ClassFileTransformer\nè·å–æ ˆå¸§ä¿¡æ¯\nå®ç°ä¸€ä¸ª http æ¥å£ï¼Œè¿”å›æ–­ç‚¹å¤„çš„æ ˆå¸§ã€‚\nåˆ é™¤æ–­ç‚¹ï¼Œå¹¶å°†è®°å½•çš„æ ˆå¸§æ•°æ®è¿”å›ã€‚\n","plink":"https://syaki.github.io/2020/05/19/Remote-debug-with-Java-Instrumentation/"},{"title":"ä¸€äº›æœ‰è¶£çš„ Codewars JavaScript é¢˜è§£","date":"2020-03-28T09:43:32.000Z","date_formatted":{"ll":"Mar 28, 2020","L":"03/28/2020","MM-DD":"03-28"},"updated":"2021-02-28T10:01:50.794Z","content":"æ€»æ‰€å‘¨çŸ¥ JavaScript æ˜¯ä¸€é—¨ æœ‰è¶£ (ğŸ–•) çš„è¯­è¨€ ^_^ , Codewars é‡Œæœ‰è®¸å¤šåˆ©ç”¨ JavaScript ç‰¹æ€§ (ç³Ÿç²•) çš„é¢˜ç›®å’Œè§£æ³•.\nè¿™é‡Œè®°å½•ä¸‹é‡åˆ°è¿‡çš„é¢˜ç›®ã€‚\nOne Line Task: Circle Intersection\nTask\nGiven two congruent circles a and b of radius r, return the area of their intersection rounded down to the nearest integer.\nCode Limit\nJavascript: Less than 94 characters.\nExample\nFor c1 = [0, 0], c2 = [7, 0] and r = 5,\nthe output should be 14.\nSolution\n1234with (Math)    circleIntersection = ([o, p], [j, k], r) =&gt; (        (n = 2 * acos(hypot(o - j, p - k) / 2 / r)), (r * r * (n - sin(n))) | 0    );\nLink Upâ€“Play game Series #7\nAbout\nI found an interesting Android game: Link Up . It is a cool looking connect game, linking two same cards for the win.\nNow Iâ€™m porting it to CW, and I hope you enjoy it.\nRules\nGive you a gamemap like this:\n12345678J L N O K F L GM D E A K B I KI O J L L M B PP C G J F D O EI N F O N M D HI N D K J E C GA M H B E P C HC F A A B H P G\ngamemap has 8 rows and 8 columns. It contains 64 chars(letter A-P, 16 chars x 4). Each chars is a card, and your task is findout the pair of cards that can connect them (the same kind) within three lines or less.\nSome example of connect(you can return the example solution to see how it works):\n12345678910111213141516one line:A----A     A           |           |           Atwo lines:A B C       A___|   D       B   ||___A       C D Athree lines:A B C A       A----|_____|           |                  -----A\nYou should return an array contains the match result of 32 pairs, like this:\n1[ [[4,1],[5,1]] , [[0,1],[0,6]] ........]\nSolution\nè¿™é‡Œ hack äº†ä¸‹ judge ä»£ç  :p\n123456789101112131415161718192021// console.log(arguments.callee.toString())var temp = String.prototype.split;String.prototype.split = function (a) &#123;    if (a == &#x27;\\n&#x27;) &#123;        return [            &#x27;J L N O K F L G&#x27;,            &#x27;M D E A K B I K&#x27;,            &#x27;I O J L L M B P&#x27;,            &#x27;P C G J F D O E&#x27;,            &#x27;I N F O N M D H&#x27;,            &#x27;I N D K J E C G&#x27;,            &#x27;A M H B E P C H&#x27;,            &#x27;C F A A B H P G&#x27;,        ];    &#125; else &#123;        return temp.apply(this, [a]);    &#125;&#125;;function linkUp(gamemap) &#123;    return [[[4,1],[5,1]],[[0,1],[0,6]],[[2,3],[2,4]],[[0,4],[1,4]],[[2,2],[3,3]],[[0,3],[2,1]],[[2,0],[4,0]],[[1,0],[2,5]],[[4,7],[6,7]],[[0,7],[5,7]],[[0,5],[3,4]],[[0,2],[4,4]],[[0,0],[5,4]],[[1,2],[6,4]],[[1,1],[3,5]],[[3,6],[4,3]],[[3,7],[5,5]],[[3,2],[7,7]],[[2,7],[7,6]],[[1,7],[5,3]],[[3,1],[5,6]],[[3,0],[6,5]],[[4,5],[6,1]],[[1,6],[5,0]],[[4,2],[7,1]],[[4,6],[5,2]],[[6,6],[7,0]],[[6,2],[7,5]],[[1,5],[2,6]],[[6,3],[7,4]],[[1,3],[6,0]],[[7,2],[7,3]]]; &#125;\nHow can I throw an error here?\nInstructions\nTry to write a function named bang throwing an error with a message string &quot;Just throw like this!&quot; with these limits:\n\n\nno invoking require function\n\n\nno invoking function constructors\n\n\nno invoking eval function\n\n\nno throw in your code\n\n\nno Error in your code\n\n\nno \\ in your code\n\n\nAlso, we removed fs, assert and vm from global scope, and removed assert from console. Do not modify Error in global scope, we do not use it to check.\nSolution\n123function bang() &#123;    process.emit(&#x27;error&#x27;, new this[&#x27;Er&#x27; + &#x27;ror&#x27;](&#x27;Just thr&#x27; + &#x27;ow like this!&#x27;));&#125;\nMulti Line Taskâˆ: Hello World\nInstructions\nYou need to write a function f that returns the string Hello, world!.\nRequirement: Every line must have at most 1 character, and total number of lines must be less than 145.\nHint: Itâ€™s possible to complete this in 99 lines only.\nSolution\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102[,b,,d,,i,,j,,l,,n,,o,,p,,s,,t]=`bdijlnopst`f=[][j+o+i+n][b+i+n+d](`Hello, world!`[s+p+l+i+t]``,[]+[])","plink":"https://syaki.github.io/2020/03/28/ä¸€äº›æœ‰è¶£çš„-Codewars-JavaScript-é¢˜è§£/"},{"title":"åˆ©ç”¨ AbstractProcessor å¢åŠ æ‘¸é±¼æ—¶é—´","date":"2020-02-01T11:44:52.000Z","date_formatted":{"ll":"Feb 1, 2020","L":"02/01/2020","MM-DD":"02-01"},"updated":"2021-03-02T05:39:16.373Z","content":"ç»ä¸æ‰‹å†™èƒ½é€šè¿‡ä»£ç ç”Ÿæˆçš„ä»£ç ï¼ï¼ï¼\nèƒŒæ™¯\nå†…éƒ¨ Web åº”ç”¨æ¡†æ¶è¦æ±‚æ‰€æœ‰åº”ç”¨å¯¹å¤–æš´éœ²çš„æ¥å£è¦å®šä¹‰ä¸€ä»½ interface ï¼Œå¹¶ä¸”å®ç°å®ƒã€‚\nå¦‚ä¸‹ï¼Œæ¯æ–°å¢ä¸€ä¸ª HTTP æ¥å£éƒ½éœ€è¦åœ¨ TestSOAService ä¸­æ·»åŠ å‡½æ•°å®šä¹‰ï¼Œå¹¶åœ¨ TestSOAServiceImpl å®ç°ã€‚\n12345678910111213public interface TestSOAService &#123;    HelloWorldResponseType helloWorld(HelloWorldRequestType request) throws Exception;&#125;@Servicepublic class TestSOAServiceImpl implements TestSOAService &#123;    @Autowired    private ServiceInvoker serviceInvoker;    public HelloWorldResponseType helloWorld(HelloWorldRequestType request) throws Exception &#123;        return serviceInvoker.invoke(HelloWorldService.class, request);    &#125;&#125;\nè§£å†³åŠæ³•\n123456789101112@Servicepublic class DefaultServiceInvokerImpl implements ServiceInvoker &#123;    private ApplicationContext context;    @Autowired    public DefaultServiceInvokerImpl(ApplicationContext context) &#123; this.context = context; &#125;    @Override    public &lt;Q, S, T&gt; S invoke(Class&lt;T&gt; cls, Q req) throws Exception &#123;        return context.getBean(cls).service(req);    &#125;&#125;\nç”±äºæ¯ä¸ªæ¥å£éƒ½æ˜¯ç»Ÿä¸€è°ƒç”¨è‡ªå®šä¹‰å®ç°çš„ ServiceInvoker.invoke æ–¹æ³•ï¼Œæ‰€ä»¥æ¯ä¸ªæ¥å£çš„å®šä¹‰å’Œå®ç°åªæœ‰åç§°ä¸åŒã€‚\nå› æ­¤è€ƒè™‘é€šè¿‡å®šä¹‰ä¸€ä¸ª AbstractProcessor çš„å­ç±»æ¥ç”Ÿæˆæ¥å£å®šä¹‰å’Œå®ç°æ–‡ä»¶ä»£ç ã€‚\nè‡ªå®šä¹‰ Annotation\nè‡ªå®šä¹‰ä¸€ä¸ª Annotation ï¼Œæ·»åŠ åˆ°æ¯ä¸ªæ¥å£ Service ç±»ä¸Šã€‚\n1234567891011121314@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@Servicepublic @interface WebService &#123;    String name() default &quot;TestSOAService&quot;;&#125;@WebServicepublic class HelloWorldService &#123;    public HelloWorldResponseType service(HelloWorldRequestType request) throws Exception &#123;        HelloWorldResponseType response = new HelloWorldResponseType();        return response;    &#125;&#125;\nå®šä¹‰ä¸€ä¸ª AbstractProcessor çš„å­ç±»\n12345678910111213141516171819202122232425262728293031323334353637383940public class WebServiceGenerateProcessor extends AbstractProcessor &#123;    private Map&lt;String, Pair&lt;TypeSpec.Builder, TypeSpec.Builder&gt;&gt; files = Maps.newLinkedHashMap();    private JavacElements elementUtils;    private JavacTypes typeUtils;    private Messager messager;    @Override    public Set&lt;String&gt; getSupportedAnnotationTypes() &#123; return Collections.singleton(WebService.class.getName()); &#125;    @Override    public SourceVersion getSupportedSourceVersion() &#123; return SourceVersion.RELEASE_8; &#125;    @Override    public synchronized void init(ProcessingEnvironment processingEnv) &#123;        super.init(processingEnv);        this.elementUtils = (JavacElements) processingEnv.getElementUtils();        this.typeUtils = (JavacTypes) processingEnv.getTypeUtils();        this.messager = processingEnv.getMessager();        this.messager.printMessage(Diagnostic.Kind.NOTE, &quot;Generate WebServices...&quot;);    &#125;    @Override    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) &#123;        if (roundEnv.processingOver()) &#123;            /**             * å†™æ–‡ä»¶             * JavaFile.builder             */        &#125; else &#123;            /**             * ç”Ÿæˆæ–‡ä»¶å†…å®¹             * é€šè¿‡ roundEnv.getElementsAnnotatedWith è·å– service class             * é€šè¿‡ TypeSpec.interfaceBuilder TypeSpec.classBuilder             * MethodSpec.methodBuilder CodeBlock.builder AnnotationSpec.builder             * ç­‰æ–¹æ³•ç”Ÿæˆæ–‡ä»¶å†…å®¹             */        &#125;        return false;    &#125;&#125;\næ•ˆæœ\nç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æœŸæ‰¾åˆ°æ‰€æœ‰æ·»åŠ äº† WebService æ³¨è§£çš„ç±»ï¼Œå¹¶æ ¹æ®æˆ‘ä»¬å®šä¹‰çš„ WebServiceGenerateProcessor.process é€»è¾‘ç”Ÿæˆ TestSOAService å’Œ TestSOAServiceImpl æ–‡ä»¶ã€‚\nè¿™æ ·æ¯å¤©åˆå¯ä»¥å¤šå‡º 5 åˆ†é’Ÿçš„æ‘¸é±¼æ—¶é—´ ğŸ¶ ã€‚\n","plink":"https://syaki.github.io/2020/02/01/åˆ©ç”¨-AbstractProcessor-å¢åŠ æ‘¸é±¼æ—¶é—´/"},{"title":"How to debug rust","date":"2019-11-04T04:58:31.000Z","date_formatted":{"ll":"Nov 4, 2019","L":"11/04/2019","MM-DD":"11-04"},"updated":"2021-01-30T07:14:12.065Z","content":"Windows\nInstall msys2\nRun mingw64.exe\n\n\nedit source\nmsys64/etc/pacman.d/\n12345678mirrorlist.mingw32Server &#x3D; http:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;msys2&#x2F;mingw&#x2F;i686mirrorlist.mingw64Server &#x3D; http:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;msys2&#x2F;mingw&#x2F;x86_64mirrorlist.msysServer &#x3D; http:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;msys2&#x2F;msys&#x2F;$arch\n\n\nrun command\n1pacman -S --noconfirm base-devel mingw64-x86_64-toolchain git\n\n\nAdd cargo config\nedit &#123;PATH&#125;/.cargo/config\nadd this:\n123[target.x86_64-pc-windows-gnu]linker &#x3D; &quot;C:\\\\msys64\\\\mingw64\\\\bin\\\\gcc.exe&quot;ar &#x3D; &quot;C:\\\\msys2\\\\mingw64\\\\bin\\\\ar.exe&quot;\nAdd PATH environmental variable\nC:\\msys64\\usr\\bin\nC:\\msys64\\mingw64\\bin\nInstall rust\nuse stable-gnu\n12rustup install stable-gnurustup default stable-gnu\nInstall CLion\n\n\ninstall intellij-rust and toml plugin\n\n\nset toolchain\nFile -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Toolchains add mingw toolchain\n\n\nmacOS\nInstall Command Line Tools or xcode.\nInstall rust, clion and intellij-rust plugin.\n","plink":"https://syaki.github.io/2019/11/04/How-to-debug-rust/"},{"title":"The Tiny Compiler","date":"2019-10-08T02:46:27.000Z","date_formatted":{"ll":"Oct 8, 2019","L":"10/08/2019","MM-DD":"10-08"},"updated":"2021-01-30T07:14:12.067Z","content":"A super tiny compiler\nThis file would only be ~200 lines of actual code. source code\nè¿™ä¸ªæ–‡ä»¶å¤§æ¦‚åªæœ‰200è¡Œä»£ç ã€‚\nWeâ€™re going to compile some lisp-like function calls into some C-like function calls.\næˆ‘ä»¬å°†æŠŠä¸€äº›ç±»ä¼¼ lisp çš„æ–¹æ³•è°ƒç”¨ç¼–è¯‘ä¸ºç±»ä¼¼ C çš„æ–¹æ³•è°ƒç”¨ã€‚\nIf we had two functions add and subtract they would be written like this:\nå¦‚æœæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ–¹æ³• add å’Œ subtractï¼Œä»–ä»¬å°†è¢«å†™æˆè¿™æ ·ï¼š\n12345               LISP                      C2 + 2          (add 2 2)                 add(2, 2)4 - 2          (subtract 4 2)            subtract(4, 2)2 + (4 - 2)    (add 2 (subtract 4 2))    add(2, subtract(4, 2))\nMost compilers break down into three primary stages: Parsing, Transformation, and Code Generation\nå¤§å¤šæ•°ç¼–è¯‘å™¨ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šè§£æã€è½¬æ¢å’Œä»£ç ç”Ÿæˆ\n\n\nParsing is taking raw code and turning it into a more abstract representation of the code.\nParsing æ˜¯å°†åŸå§‹ä»£ç è½¬åŒ–ä¸ºæŠ½è±¡ä»£ç è¡¨ç°å½¢å¼ã€‚\n\n\nTransformation takes this abstract representation and manipulates to do whatever the compiler wants it to.\nTransformation æ¥å—æŠ½è±¡è¡¨ç¤ºå¹¶æŒ‰ç…§ç¼–è¯‘å™¨çš„è¦æ±‚æ“ä½œã€‚\n\n\nCode Generation takes the transformed representation of the code and turns it into new code.\nCode Generation æ ¹æ®è½¬åŒ–åçš„æŠ½è±¡ä»£ç è¡¨ç°å½¢å¼ç”Ÿäº§æ–°çš„ä»£ç ã€‚\n\n\nParsing\nParsing typically gets broken down into two phases: Lexical Analysis and Syntactic Analysis.\nè§£æé€šå¸¸åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šè¯æ³•åˆ†æå’Œå¥æ³•åˆ†æã€‚\n\n\nLexical Analysis takes the raw code and splits it apart into these things called tokens by a thing called a tokenizer (or lexer).\nLexical Analysis è·å–åŸå§‹ä»£ç ï¼Œå¹¶å°†å…¶åˆ†è§£ä¸ºç”±è®°å·èµ‹äºˆå™¨ï¼ˆæˆ–lexerï¼‰ç»„æˆçš„è®°å·ã€‚\nTokens are an array of tiny little objects that describe an isolated piece of the syntax. They could be numbers, labels, punctuation, operators, whatever.\nä»¤ç‰Œæ˜¯ä¸€ç»„å¾®å°çš„å¯¹è±¡ï¼Œå®ƒä»¬æè¿°äº†ä¸€ä¸ªå­¤ç«‹çš„è¯­æ³•ç‰‡æ®µã€‚å®ƒä»¬å¯ä»¥æ˜¯æ•°å­—ã€æ ‡ç­¾ã€æ ‡ç‚¹ç¬¦å·ã€æ“ä½œç¬¦ç­‰ç­‰ã€‚\n\n\nSyntactic Analysis takes the tokens and reformats them into a representation that describes each part of the syntax and their relation to one another. This is known as an intermediate representation or Abstract Syntax Tree.\nSyntactic Analysis è·å–æ ‡è®°å¹¶å°†å®ƒä»¬é‡æ–°æ ¼å¼åŒ–ä¸ºä¸€ä¸ªè¡¨ç¤ºï¼Œè¯¥è¡¨ç¤ºæè¿°äº†è¯­æ³•çš„æ¯ä¸ªéƒ¨åˆ†ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ä¸­é—´è¡¨ç¤ºæˆ–æŠ½è±¡è¯­æ³•æ ‘ã€‚\nAn Abstract Syntax Tree, or AST for short, is a deeply nested object that represents code in a way that is both easy to work with and tells us a lot of information.\næŠ½è±¡è¯­æ³•æ ‘ï¼Œç®€ç§°ASTï¼Œæ˜¯ä¸€ç§åµŒå¥—å¾ˆæ·±çš„å¯¹è±¡ï¼Œå®ƒä»¥ä¸€ç§æ—¢æ˜“äºä½¿ç”¨åˆèƒ½å‘Šè¯‰æˆ‘ä»¬å¾ˆå¤šä¿¡æ¯çš„æ–¹å¼è¡¨ç¤ºä»£ç ã€‚\n\n\nFor the following syntax:\n(add 2 (subtract 4 2))\n\nTokens might look something like this:\n1234567891011[    &#123; type: &#x27;paren&#x27;,  value: &#x27;(&#x27;        &#125;,    &#123; type: &#x27;name&#x27;,   value: &#x27;add&#x27;      &#125;,    &#123; type: &#x27;number&#x27;, value: &#x27;2&#x27;        &#125;,    &#123; type: &#x27;paren&#x27;,  value: &#x27;(&#x27;        &#125;,    &#123; type: &#x27;name&#x27;,   value: &#x27;subtract&#x27; &#125;,    &#123; type: &#x27;number&#x27;, value: &#x27;4&#x27;        &#125;,    &#123; type: &#x27;number&#x27;, value: &#x27;2&#x27;        &#125;,    &#123; type: &#x27;paren&#x27;,  value: &#x27;)&#x27;        &#125;,    &#123; type: &#x27;paren&#x27;,  value: &#x27;)&#x27;        &#125;,]\nAnd an Abstract Syntax Tree (AST) might look like this:\n123456789101112131415161718192021&#123;    type: &#x27;Program&#x27;,    body: [&#123;        type: &#x27;CallExpression&#x27;,        name: &#x27;add&#x27;,        params: [&#123;            type: &#x27;NumberLiteral&#x27;,            value: &#x27;2&#x27;,        &#125;, &#123;            type: &#x27;CallExpression&#x27;,            name: &#x27;subtract&#x27;,            params: [&#123;                type: &#x27;NumberLiteral&#x27;,                value: &#x27;4&#x27;,            &#125;, &#123;                type: &#x27;NumberLiteral&#x27;,                value: &#x27;2&#x27;,            &#125;]        &#125;]    &#125;]&#125;\nTransformation\nThe next type of stage for a compiler is transformation. Again, this just takes the AST from the last step and makes changes to it. It can manipulate the AST in the same language or it can translate it into an entirely new language.\nç¼–è¯‘å™¨çš„ä¸‹ä¸€ä¸ªé˜¶æ®µæ˜¯è½¬æ¢ã€‚åŒæ ·ï¼Œè¿™åªæ˜¯ä»æœ€åä¸€æ­¥è·å–ASTå¹¶å¯¹å…¶è¿›è¡Œæ›´æ”¹ã€‚å®ƒå¯ä»¥åœ¨åŒä¸€ç§è¯­è¨€ä¸­æ“ä½œASTï¼Œä¹Ÿå¯ä»¥å°†å®ƒç¿»è¯‘æˆä¸€ç§å…¨æ–°çš„è¯­è¨€ã€‚\nYou might notice that our AST has elements within it that look very similar. There are these objects with a type property. Each of these are known as an AST Node. These nodes have defined properties on them that describe one isolated part of the tree.\næ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼ŒASTä¸­çš„å…ƒç´ çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼ã€‚è¿™äº›å¯¹è±¡å…·æœ‰typeå±æ€§ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½ç§°ä¸ºASTèŠ‚ç‚¹ã€‚è¿™äº›èŠ‚ç‚¹ä¸Šå®šä¹‰äº†æè¿°æ ‘çš„ä¸€ä¸ªç‹¬ç«‹éƒ¨åˆ†çš„å±æ€§ã€‚\nWe can have a node for a â€œNumberLiteralâ€:\n1234&#123;    type: &#x27;NumberLiteral&#x27;,    value: &#x27;2&#x27;,&#125;\nOr maybe a node for a â€œCallExpressionâ€:\n12345&#123;    type: &#x27;CallExpression&#x27;,    name: &#x27;subtract&#x27;,    params: [...nested nodes go here...],&#125;\nWhen transforming the AST we can manipulate nodes by adding/removing/replacing properties, we can add new nodes, remove nodes, or we could leave the existing AST alone and create an entirely new one based on it.\nåœ¨è½¬æ¢ASTæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ /åˆ é™¤/æ›¿æ¢å±æ€§æ¥æ“ä½œèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ æ–°èŠ‚ç‚¹ï¼Œåˆ é™¤èŠ‚ç‚¹ï¼Œæˆ–è€…æˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨ç°æœ‰çš„ASTå¹¶åŸºäºå®ƒåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ASTã€‚\nSince weâ€™re targeting a new language, weâ€™re going to focus on creating an entirely new AST that is specific to the target language.\nç”±äºæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¸€ç§æ–°è¯­è¨€ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†é‡ç‚¹åˆ›å»ºä¸€ä¸ªé’ˆå¯¹ç›®æ ‡è¯­è¨€çš„å…¨æ–°ASTã€‚\nTraversal\nIn order to navigate through all of these nodes, we need to be able to traverse through them. This traversal process goes to each node in the AST depth-first.\nä¸ºäº†æµè§ˆæ‰€æœ‰è¿™äº›èŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿéå†å®ƒä»¬ã€‚è¿™ä¸ªéå†è¿‡ç¨‹é¦–å…ˆéå†ASTæ·±åº¦ç¬¬ä¸€çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚\n123456789101112131415161718192021&#123;    type: &#x27;Program&#x27;,    body: [&#123;        type: &#x27;CallExpression&#x27;,        name: &#x27;add&#x27;,        params: [&#123;            type: &#x27;NumberLiteral&#x27;,            value: &#x27;2&#x27;        &#125;, &#123;            type: &#x27;CallExpression&#x27;,            name: &#x27;subtract&#x27;,            params: [&#123;                type: &#x27;NumberLiteral&#x27;,                value: &#x27;4&#x27;            &#125;, &#123;                type: &#x27;NumberLiteral&#x27;,                value: &#x27;2&#x27;            &#125;]        &#125;]    &#125;]&#125;\nSo for the above AST we would go:\n\n\nProgram - Starting at the top level of the AST\nä»ASTçš„é¡¶å±‚å¼€å§‹\n\n\nCallExpression (add) - Moving to the first element of the Programâ€™s body\nç§»åŠ¨åˆ°ç¨‹åºä¸»ä½“çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n\n\nNumberLiteral (2) - Moving to the first element of CallExpressionâ€™s params\nç§»åŠ¨åˆ°CallExpressionçš„å‚æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n\n\nCallExpression (subtract) - Moving to the second element of CallExpressionâ€™s params\nç§»åŠ¨åˆ°CallExpressionçš„å‚æ•°çš„ç¬¬äºŒä¸ªå…ƒç´ \n\n\nNumberLiteral (4) - Moving to the first element of CallExpressionâ€™s params\nç§»åŠ¨åˆ°CallExpressionçš„å‚æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n\n\nNumberLiteral (2) - Moving to the second element of CallExpressionâ€™s params\nç§»åŠ¨åˆ°CallExpressionçš„å‚æ•°çš„ç¬¬äºŒä¸ªå…ƒç´ \n\n\nIf we were manipulating this AST directly, instead of creating a separate AST, we would likely introduce all sorts of abstractions here. But just visiting each node in the tree is enough for what weâ€™re trying to do.\nå¦‚æœæˆ‘ä»¬ç›´æ¥æ“ä½œè¿™ä¸ªASTï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ASTï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨è¿™é‡Œå¼•å…¥å„ç§å„æ ·çš„æŠ½è±¡ã€‚ä½†åªè¦è®¿é—®æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å°±è¶³å¤Ÿäº†ã€‚\nThe reason I use the word â€œvisitingâ€ is because there is this pattern of how to represent operations on elements of an object structure.\næˆ‘ä¹‹æ‰€ä»¥ä½¿ç”¨â€œè®¿é—®â€è¿™ä¸ªè¯ï¼Œæ˜¯å› ä¸ºå­˜åœ¨è¿™æ ·ä¸€ç§æ¨¡å¼ï¼Œå³å¦‚ä½•è¡¨ç¤ºå¯¹è±¡ç»“æ„å…ƒç´ ä¸Šçš„æ“ä½œã€‚\nVisitors\nThe basic idea here is that we are going to create a â€œvisitorâ€ object that has methods that will accept different node types.\nè¿™é‡Œçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªâ€œvisitorâ€å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„æ–¹æ³•å°†æ¥å—ä¸åŒçš„èŠ‚ç‚¹ç±»å‹ã€‚\n1234var visitor = &#123;    NumberLiteral() &#123;&#125;,    CallExpression() &#123;&#125;,&#125;;\nWhen we traverse our AST, we will call the methods on this visitor whenever we â€œenterâ€ a node of a matching type.\nå½“æˆ‘ä»¬éå†ASTæ—¶ï¼Œæ¯å½“æˆ‘ä»¬â€œè¾“å…¥â€ä¸€ä¸ªåŒ¹é…ç±»å‹çš„èŠ‚ç‚¹æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªè®¿é—®å™¨ä¸Šçš„æ–¹æ³•ã€‚\nIn order to make this useful we will also pass the node and a reference to the parent node.\nä¸ºäº†ä½¿å…¶æœ‰ç”¨ï¼Œæˆ‘ä»¬è¿˜å°†æŠŠèŠ‚ç‚¹å’Œå¼•ç”¨ä¼ é€’ç»™çˆ¶èŠ‚ç‚¹ã€‚\n1234var visitor = &#123;    NumberLiteral(node, parent) &#123;&#125;,    CallExpression(node, parent) &#123;&#125;,&#125;;\nHowever, there also exists the possibility of calling things on â€œexitâ€. Imagine our tree structure from before in list form:\nä½†æ˜¯ï¼Œä¹Ÿå­˜åœ¨è°ƒç”¨â€œexitâ€çš„å¯èƒ½æ€§ã€‚æƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬çš„æ ‘ç»“æ„ï¼Œä»ä»¥å‰çš„åˆ—è¡¨å½¢å¼:\n123456- Program    - CallExpression        - NumberLiteral        - CallExpression            - NumberLiteral            - NumberLiteral\nAs we traverse down, weâ€™re going to reach branches with dead ends. As we finish each branch of the tree we â€œexitâ€ it. So going down the tree we â€œenterâ€ each node, and going back up we â€œexitâ€.\nå½“æˆ‘ä»¬å‘ä¸‹èµ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šåˆ°è¾¾ä¸€äº›æ²¡æœ‰æ ‘æçš„å°½å¤´ã€‚å½“æˆ‘ä»¬å®Œæˆæ ‘çš„æ¯ä¸ªåˆ†æ”¯æ—¶ï¼Œæˆ‘ä»¬â€œé€€å‡ºâ€å®ƒã€‚å› æ­¤ï¼Œæ²¿ç€æ ‘å‘ä¸‹ï¼Œæˆ‘ä»¬â€œè¾“å…¥â€æ¯ä¸ªèŠ‚ç‚¹ï¼Œç„¶åå‘ä¸Šï¼Œæˆ‘ä»¬â€œé€€å‡ºâ€æ¯ä¸ªèŠ‚ç‚¹ã€‚\n123456789101112-&gt; Program (enter)    -&gt; CallExpression (enter)        -&gt; Number Literal (enter)        &lt;- Number Literal (exit)        -&gt; Call Expression (enter)            -&gt; Number Literal (enter)            &lt;- Number Literal (exit)            -&gt; Number Literal (enter)            &lt;- Number Literal (exit)        &lt;- CallExpression (exit)    &lt;- CallExpression (exit)&lt;- Program (exit)\nIn order to support that, the final form of our visitor will look like this:\nä¸ºäº†æ”¯æŒè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬çš„è®¿é—®è€…çš„æœ€ç»ˆå½¢å¼å°†æ˜¯è¿™æ ·çš„:\n123456var visitor = &#123;    NumberLiteral: &#123;        enter(node, parent) &#123;&#125;,        exit(node, parent) &#123;&#125;,    &#125;&#125;;\nCode Generation\nThe final phase of a compiler is code generation. Sometimes compilers will do things that overlap with transformation, but for the most part code generation just means take our AST and string-ify code back out.\nç¼–è¯‘å™¨çš„æœ€åé˜¶æ®µæ˜¯ä»£ç ç”Ÿæˆã€‚æœ‰æ—¶ç¼–è¯‘å™¨ä¼šåšä¸€äº›ä¸è½¬æ¢é‡å çš„äº‹æƒ…ï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä»£ç ç”Ÿæˆåªæ˜¯æ„å‘³ç€å°†ASTå’Œstring-ifyä»£ç æ‹¿å‡ºæ¥ã€‚\nCode generators work several different ways, some compilers will reuse the tokens from earlier, others will have created a separate representation of the code so that they can print node linearly, but from what I can tell most will use the same AST we just created, which is what weâ€™re going to focus on.\nä»£ç ç”Ÿæˆå™¨æœ‰å‡ ç§ä¸åŒçš„æ–¹å¼å·¥ä½œï¼Œä¸€äº›ç¼–è¯‘å™¨å°†é‡ç”¨ä»¤ç‰Œï¼Œå…¶å®ƒçš„å°†ä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ä»£ç è¡¨ç¤ºï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥æ‰“å°èŠ‚ç‚¹çº¿æ€§ï¼Œä½†æˆ‘å¯ä»¥è¯´å¤§éƒ¨åˆ†éƒ½ä½¿ç”¨æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ç›¸åŒçš„ASTï¼Œè¿™æ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„ã€‚\nEffectively our code generator will know how to â€œprintâ€ all of the different node types of the AST, and it will recursively call itself to print nested nodes until everything is printed into one long string of code.\nå®é™…ä¸Šï¼Œæˆ‘ä»¬çš„ä»£ç ç”Ÿæˆå™¨å°†çŸ¥é“å¦‚ä½•â€œæ‰“å°â€ASTçš„æ‰€æœ‰ä¸åŒèŠ‚ç‚¹ç±»å‹ï¼Œå®ƒå°†é€’å½’åœ°è°ƒç”¨è‡ªèº«æ¥æ‰“å°åµŒå¥—èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰€æœ‰å†…å®¹éƒ½æ‰“å°åˆ°ä¸€ä¸ªé•¿ä¸²ä»£ç ä¸­ã€‚\n","plink":"https://syaki.github.io/2019/10/08/The-Tiny-Compiler/"},{"title":"How to use Xi-editor?","date":"2019-05-08T06:38:05.000Z","date_formatted":{"ll":"May 8, 2019","L":"05/08/2019","MM-DD":"05-08"},"updated":"2021-01-30T07:14:12.065Z","content":"\nWhat is Xi-editor?\nThe xi-editor project is an attempt to build a high quality text editor, using modern software engineering techniques.\nInstall it on macOS\nRequirements\n\n\nXcode 10.2\n\n\nRust\n\n\nInstalling\nClone the repository:\n12git clone --recurse-submodules https://github.com/xi-editor/xi-maccd xi-mac\nBuild and Open:\n1xcodebuild\nXiEditor.app in ./build/Release/\nMove to Applications Folder:\ndrag to Application folder\n1cp -r Build/Release/XiEditor.app /Applications\nCLI\ninstalling\n\n\nOpen XiEditor\n\n\nXiEditor &gt; Install Command Line Tool\n\n\nInstall theme\nDownload theme file\ndracula for sublime\nMove to :\nfind /Users/username/Library/Application\\ Support/XiEditor/themes/\ndrag Dracula.tmTheme to it\nChange theme\nA theme can be selected from the Debug &gt; Theme menu. There is not yet a mechanism for including custom themes.\nConfiguration\nthe general preferences are located at ~/Library/Application Support/XiEditor/preferences.xiconfig. This file can be opened from File &gt; Preferences (âŒ˜ + ,).\nInstall plugin\nDownload plugin\nWord Count Plugin for Xi-editor\nInstallation\nunzip /Users/huixie/Library/Application\\ Support/XiEditor/plugins/\ndrag xi-mac folder to it\ngo to plugin folder\n1make install\nopen Xi-editorï¼ŒDebug &gt; Plugin start\n\nOther plugin\nSearch xi-editor plugin in Github.\n","plink":"https://syaki.github.io/2019/05/08/How-to-use-Xi-editor/"}]